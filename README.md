# Qiwi_admin_panel
**Qiwi админ панель с телеграмм ботом**
![alt text](screen.png)

Возможности:
- Добавление нескольких кошельков
- Получение БАЛАНСа по всем кошелькам
- Получение ТОТАЛ расходов за сегодня
- Получение ТОТАЛ расходов за 7 дней
- Получение ПОСЛЕДНИХ 10 операций по всем кошелькам
- Добавление сотрудников для просмотра статистики в боте


<b>Для работы бота на сайте должен быть `SSL-сертификат` (https://)</b>

**Установка:** 

1. Скачиваем и распаковаываем на хостинге/сервере 
2. Данные к базе данных в файле: `includes/config.php`
3. Импортиурем файл с базой данных `includes/qiwi.sql` в phpMyAdmin в вашу БД 
4. В файле `bot.php` в 15 строке вставьте токен полученный у @BotFather
5. Данные для входа: admin admin

**Получение токена**

1) Открываете чат с @BotFather;
2) Вводите или выбираете из списка команду /newbot;
3) Отправляете желаемое название для бота;
4) Пишете юзернейм бота, по которому его будут находить через поиск. Обязательно на конце вашего юзернейма должно быть слово «bot» или «_bot». Например, NetologyRSSbot;
5) По желанию можно сразу настроить полное или краткое описание, список команд и аватарку
6) По итогу регистрации получаем наш токен — 375466075:AAEARK0r2nXjB67JiB35JCXXhKEyT42Px8s

**Настройка WebHooks для работы бота**

1) У вас на сайте обязательно должен быть установлен SSL-сертификат, чтобы все запросы проходили через безопасный протокол HTTPS. Самоподписанные и бесплатные сертификаты «Let’s Encrypt», которые поддерживает большинство хостингов, также подходят. 

2) Указываем телеграмму на наш файл обработчик: 
https://api.telegram.org/bot375466075:AAEARK0r2nXjB67JiB35JCXXhKEyT42Px8s/setWebhook?url=https://yoursitehere.ru/bot.php,

где `375466075:AAEARK0r2nXjB67JiB35JCXXhKEyT42Px8s` — это наш токен,
`https://yousitehere.ru/bot.php` — ссылка на файл-обработчик на нашем сайте.

Открыв в браузере эту ссылку, должен прийти JSON-ответ со значением `«Webhook was set»`, что будет означать, что вебхук установлен, и теперь все запросы от пользователей будут присылаться по адресу файла-обработчика. 

**Начало работы с ботом:**

1) Написать `/start` - бот пришлет ваш `chat_id`
2) Зайди в админ панель в отредактировать юзера admin в поле `chat_id` вписать `ID` полученный в боте
3) Пишем ещё раз `/start` - и наслаждаемся!
